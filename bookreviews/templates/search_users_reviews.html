
{% extends 'base.html' %}

{% block title %} Admin Search Users and Reviews {% endblock %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Search Users and Reviews</title>
</head>
<body>
    <h1>User / Review / Comments Search</h1>
    <fieldset>
        <legend>Search Users or Reviews or Comments</legend>
        <form method="GET" action="{% url 'search_users_reviews' %}">
            {{ form.as_p }}
            <button type="submit">Search</button>
        </form>
    </fieldset>

    {% if users %}
        <h2>Users Search Results</h2>
        <ul>
            {% for user in users %}
                <li>{{ user.username }}</li>
                <a href="{% url 'edit_user' user_id=user.id %}">Edit User</a>
                <a href="{% url 'delete_user' user_id=user.id %}">Delete User</a>
                <!-- You can display additional user information here -->
            {% endfor %}
        </ul>
    {% else %}
        <p>No users found.</p>
    {% endif %}

    {% if reviews %}
        <h2>Reviews Search Results</h2>
        <ul>
            {% for review in reviews reversed%}
            
                <li>
                    {{ review.user.username }}'s review of  <a href="{% url 'book_detail' review.book_id %}">{{ review.book_title }}</a>  
                    <p>{{ review.review_content }} </p>
                    <p>Published on {{ review.review_date }}</p>
                 
                    <a href="{% url 'edit_any_review' review_id=review.id %}">Edit Review</a>
                    <a href="{% url 'delete_any_review' review_id=review.id %}">Delete Review</a>
                <!-- You can display additional review information here -->
                </li><br><br>
            {% endfor %}
        </ul>
    {% else %}
        <p>No reviews found.</p>
    {% endif %} 

    {% if comments %}
        <h2>Comments Search Results</h2>
        <ul>
            {% if perms.bookreviews.can_delete_comments %}
            {% for comment in comments reversed%}
                <li>User {{ comment.user.username }}'s comment: {{ comment.comment_text }}</li>
                <p>
                    <form action=" {% url 'delete_comment' comment.id %}"method="POST">
                    {% csrf_token %}
                    <!-- <input type="submit" value="delete comment "> -->
                    <button type="submit" value="delete comment ">Delete Comment</button>
                    </form>
                </p>
                <!-- You can display additional comment information here -->
            {% endfor %}
            {% endif %}
        </ul>
    {% else %}
        <p>No comments found.</p>
    {% endif %}

    
</body>
</html>

{% endblock %}